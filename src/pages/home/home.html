<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title style="color: white">{{ 'HOME_TITLE' | translate }}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="main">


  <!-- <canvas id="video-canvas"></canvas>
    <script>
      console.log("123");
      $(document).ready(function () {
        var canvas = document.getElementById('video-canvas');
		    var url = 'ws://192.168.137.100:8083/';
        var player = new JSMpeg.Player(url, {canvas: canvas});
        console.log("123");
      });
    </script> -->
  <!-- <video controls="controls" src="http://192.168.1.28:8080/hls/stream.m3u8" width="300" height="140" name="Video Name" ></video> -->
  <!-- <canvas id="video-canvas"></canvas>
	<script type="text/javascript" src="assets/jsmpeg.min.js"></script>
	<script type="text/javascript">
		var canvas = document.getElementById('video-canvas');
		var url = 'ws://192.168.137.112:8083/';
		var player = new JSMpeg.Player(url, {canvas: canvas});
  </script> -->
  
  <ion-grid style="padding: 5px">
    <ion-row>
      <!-- CUADRO 1 -->
      <ion-col  [ngClass]="[columnaCamera,(columnaCamera=='col12' && visible!=1)?'invisib':'visib',(selected!=1)?'noselected':'selected']" (click)="camSelect(1);" (dblclick)="camResize(1)">
        <div class="camara">
          <button style="height: 100%"  [ngClass]="[(videoActive1)?'invisib':'visibl']" ion-button color="light" clear icon-only (click)="alertCameras(1);">
            <ion-icon style="font-size: 40px;" ios="ios-add" md="md-add" is-active="false"></ion-icon>
          </button>
          <div [ngClass]="[(!videoActive1)?'invisib':'visibl']" style="height: 100%"><div id="myMediaDiv1">Cargando contenido...</div></div>
          <!-- &nbsp; -->
        </div>
      </ion-col>
      <!-- CUADRO 2 -->
      <ion-col [ngClass]="[columnaCamera,(columnaCamera=='col12' && visible!=2)?'invisib':'visib',(selected!=2)?'noselected':'selected']" (click)="camSelect(2);" (dblclick)="camResize(2)">
        <div class="camara">
          <button style="height: 100%" [ngClass]="[(videoActive2)?'invisib':'visibl']" ion-button color="light" clear icon-only (click)="alertCameras(2);">
            <ion-icon style="font-size: 40px" ios="ios-add" md="md-add" is-active="false"></ion-icon>
          </button>
          <div [ngClass]="[(!videoActive2)?'invisib':'visibl']" style="height: 100%"><div id="myMediaDiv2">Cargando contenido...</div></div>
          &nbsp;
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <!-- CUADRO 3 -->
      <ion-col [ngClass]="[columnaCamera,(columnaCamera=='col12' && visible!=3)?'invisib':'visib',(selected!=3)?'noselected':'selected']" (click)="camSelect(3);" (dblclick)="camResize(3)">
        <div class="camara">
          <button style="height: 100%" [ngClass]="[(videoActive3)?'invisib':'visibl']" ion-button color="light" clear icon-only (click)="alertCameras(3);">
            <ion-icon style="font-size: 40px" ios="ios-add" md="md-add" is-active="false"></ion-icon>
          </button>
          <div [ngClass]="[(!videoActive3)?'invisib':'visibl']" style="height: 100%"><div id="myMediaDiv3">Cargando contenido...</div></div>
          &nbsp;
        </div>
      </ion-col>
      <!-- CUADRO 4 -->
      <ion-col [ngClass]="[columnaCamera,(columnaCamera=='col12' && visible!=4)?'invisib':'visib',(selected!=4)?'noselected':'selected']" (click)="camSelect(4);" (dblclick)="camResize(4)">
        <div class="camara">
          <button style="height: 100%" [ngClass]="[(videoActive4)?'invisib':'visibl']" ion-button color="light" clear icon-only (click)="alertCameras(4);">
            <ion-icon style="font-size: 40px" ios="ios-add" md="md-add" is-active="false"></ion-icon>
          </button>
          <div [ngClass]="[(!videoActive4)?'invisib':'visibl']" style="height: 100%"><div id="myMediaDiv4">Cargando contenido...</div></div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
  <!-- TOOLBAR -->
  <ion-grid [ngClass]="(columnaCamera=='col6')?'invisib':'visib'" no-padding>
      <ion-row padding-horizontal>
        <ion-col text-center>
          <button class="toolbar" [class.active]="toolbarActive=='mic'" ion-button icon-only (click)="toolbar('mic');">
            <ion-icon style="font-size: 40px" name="mic"></ion-icon>
          </button>
        </ion-col>
        <ion-col text-center margin-horizontal>
          <button class="toolbar" [class.active]="toolbarActive=='move'" ion-button icon-only (click)="toolbar('move');">
            <ion-icon style="font-size: 40px" name="move"></ion-icon>
          </button>
        </ion-col>
        <ion-col text-center>
          <button class="toolbar" [class.active]="toolbarActive=='trash'" ion-button icon-only (click)="deleteButtonToolbar()">
            <ion-icon style="font-size: 40px" name="trash"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
  </ion-grid>
  <!-- <div (click)="someAction();">
    <video width="300" height="140" controls>
      <source controls src="http://192.168.1.28:8080/hls/stream.m3u8"/> 
    </video>
  </div> -->
  <!-- justify-content-center  -->
  <ion-grid [class.invisib]="columnaCamera=='col12'">
    <ion-row>
      <ion-col align-self-start>
        <p padding-left>
          <b>{{ 'LABEL_CONEXION' | translate }}: {{conexion}}<br></b>
          <b>{{ 'LABEL_ONLINE' | translate }}: {{enLinea}}<br></b>
        </p>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid [ngClass]="(columnaCamera=='col12' && toolbarActive=='move')?'visib':'invisib'">
      <ion-row justify-content-center>
        <div id="joystick" style="width:160px;">
          <svg width="100%" height="100%" viewBox="0 0 100 100">
              <defs>
                  <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop offset="0%" style="stop-color:rgb(16,16,16);stop-opacity:1" />
                      <stop offset="100%" style="stop-color:rgb(240,240,240);stop-opacity:1" />
                  </linearGradient>
                  <linearGradient id="grad2" x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop offset="0%" style="stop-color:rgb(240,240,240);stop-opacity:1" />
                      <stop offset="100%" style="stop-color:rgb(16,16,16);stop-opacity:1" />
                  </linearGradient>
                  <linearGradient id="grad3" x1="0%" y1="0%" x2="0%" y2="100%">
                      <stop offset="0%" style="stop-color:rgb(168,168,168);stop-opacity:1" />
                      <stop offset="100%" style="stop-color:rgb(239,239,239);stop-opacity:1" />
                  </linearGradient>
              </defs>
              <circle cx="50" cy="50" r="50" fill="url(#grad1)" />
              <circle cx="50" cy="50" r="47" fill="url(#grad2)" stroke="black" stroke-width="1.5px" />
              <circle cx="50" cy="50" r="44" fill="url(#grad3)" />
              <circle cx="50" cy="50" r="20" fill="#cccccc" stroke="black" stroke-width="1px" />
              <line x1="30" y1="50" x2="70" y2="50" stroke="black" />

              <svg viewBox="0 0 60 60">
                  <a (click)="pressZoom();" (touchend)="dontpress();">
                    <text x="50%" y="48%" text-anchor="middle" stroke="#0000">+</text>
                  </a>
                  <a (click)="pressWide();" (touchend)="dontpress();">
                    <text x="50%" y="68%" text-anchor="middle" stroke="#0000">-</text>
                  </a>
              </svg>
              <a id="buttonUp"    (click)="clickUp();" (press)="pressUp();" (touchend)="dontpress();">   <path d="M50,7 60,25 40,25Z" fill="rgba(0,0,0,0.8)" /></a>
              <a id="buttonDown"  (click)="clickDown();" (press)="pressDown();" (touchend)="dontpress();"> <path d="M50,93 60,75 40,75Z" fill="rgba(0,0,0,0.8)" /></a>
              <a id="buttonLeft"  (click)="clickLeft();" (press)="pressLeft();" (touchend)="dontpress();"> <path d="M7,50 25,60 25,40Z" fill="rgba(0,0,0,0.8)" /></a>
              <a id="buttonRight" (click)="clickRight();" (press)="pressRight();" (touchend)="dontpress();"><path d="M93,50 75,60 75,40Z" fill="rgba(0,0,0,0.8)" /></a>
          </svg>
      </div>
    </ion-row>
  </ion-grid>
  <br>
  <!-- REC BUTTON -->
  <ion-grid [ngClass]="(columnaCamera=='col6' || toolbarActive=='mic')?'visib':'invisib'">
    <ion-row>
      <div class="socket" [class.active]="buttonActive">
        <div class="button" [class.active]="buttonActive" (press)="startRecord()" (touchend)="stopRecord()"></div>
      </div>
    </ion-row>
  </ion-grid>
  
</ion-content>
